<!--Name: Harry Yu
Date: 6/9/2023
Course: CS 290-->

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>List of all Songs</title>
        <link rel="stylesheet" href="index.css">
    </head>
    <body>
        <main>
            <header>
                <h1>Music Services</h1>
            </header>
            <nav>
                <a href="/search.html">Search by Genre</a> |
                <a href="/update.html">Update a Song</a> |
                <a href="/delete.html">Delete a Song</a> |
                <a href="/add.html">Add a Song</a> |
                <a href="/list.html">List All Songs</a>
            </nav>
            <h2>List of all Songs</h2>
            <table id="songTable">
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Artist</th>
                    <th>Released</th>
                    <th>Popularity</th>
                    <th>Genre</th>
                </tr>
            </table>
            <footer>
                <p>Created by Harry Yu in May 2023</p>
            </footer>
        </main>
    </body>
    <script>
        //Code copied from class
        addEventListener("DOMContentLoaded", async function() {
        const response = await fetch("/api/songs");
        const songs = await response.json();  
        let html = `<tr><th>ID</th><th>Title</th><th>Artist</th><th>Popularity</th><th>Release date</th><th>Genre(s)</th></tr>`; //First row of table
        for (let song of songs) {
            html += `<tr><td>${song._id}</td><td>${song.title}</td><td>${song.artist}</td><td>${song.popularity}</td><td>${song.releaseDate}</td><td>${song.genre}</td>`; //Songs information
        }
        document.getElementById("songTable").innerHTML = html;
        });
    </script>
</html>